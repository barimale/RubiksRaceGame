using RubiksRaceGame.Services;

namespace RubiksRaceGame
{
    public partial class Game : Form
    {
        public Game()
        {
            InitializeComponent();

            button1.ForeColor = Color.Transparent;
            button2.ForeColor = Color.Transparent;
            button3.ForeColor = Color.Transparent;
            button4.ForeColor = Color.Transparent;
            button5.ForeColor = Color.Transparent;
            button6.ForeColor = Color.Transparent;
            button7.ForeColor = Color.Transparent;
            button8.ForeColor = Color.Transparent;
            button9.ForeColor = Color.Transparent;
            button10.ForeColor = Color.Transparent;
            button11.ForeColor = Color.Transparent;
            button12.ForeColor = Color.Transparent;
            button13.ForeColor = Color.Transparent;
            button14.ForeColor = Color.Transparent;
            button15.ForeColor = Color.Transparent;
            button16.ForeColor = Color.Transparent;
            button17.ForeColor = Color.Transparent;
            button18.ForeColor = Color.Transparent;
            button19.ForeColor = Color.Transparent;
            button20.ForeColor = Color.Transparent;
            button21.ForeColor = Color.Transparent;
            button22.ForeColor = Color.Transparent;
            button23.ForeColor = Color.Transparent;
            button24.ForeColor = Color.Transparent;
            button25.ForeColor = Color.Transparent;

            button26.Text = string.Empty;
            button27.Text = string.Empty;
            button28.Text = string.Empty;
            button29.Text = string.Empty;
            button30.Text = string.Empty;
            button31.Text = string.Empty;
            button32.Text = string.Empty;
            button33.Text = string.Empty;
            button34.Text = string.Empty;

        }

        private void button1_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button1", sender, e);
        }

        // WIP pass button1 here 
        private void button1_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button1", sender, e);
        }

        private void button1_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button1", sender, e);
        }
        private void button2_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button2", sender, e);
        }


        private void button2_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button2", sender, e);
        }

        private void button2_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button2", sender, e);
        }

        private void button3_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button3", sender, e);
        }


        private void button3_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button3", sender, e);
        }

        private void button3_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button3", sender, e);
        }

        private void button4_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button4", sender, e);
        }


        private void button4_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button4", sender, e);
        }

        private void button4_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button4", sender, e);
        }

        private void button5_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button5", sender, e);
        }


        private void button5_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button5", sender, e);
        }

        private void button5_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button5", sender, e);
        }
        private void button6_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button6", sender, e);
        }
        private void button6_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button6", sender, e);
        }

        private void button6_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button6", sender, e);
        }

        private void button7_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button7", sender, e);
        }


        private void button7_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button7", sender, e);
        }

        private void button7_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button7", sender, e);
        }
        private void button8_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button8", sender, e);
        }


        private void button8_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button8", sender, e);
        }

        private void button8_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button8", sender, e);
        }
        private void button9_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button9", sender, e);
        }


        private void button9_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button9", sender, e);
        }

        private void button9_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button9", sender, e);
        }
        private void button10_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button10", sender, e);
        }


        private void button10_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button10", sender, e);
        }

        private void button10_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button10", sender, e);
        }
        private void button11_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button11", sender, e);
        }


        private void button11_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button11", sender, e);
        }

        private void button11_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button11", sender, e);
        }
        private void button12_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button12", sender, e);
        }


        private void button12_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button12", sender, e);
        }

        private void button12_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button12", sender, e);
        }
        private void button13_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button13", sender, e);
        }


        private void button13_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button13", sender, e);
        }

        private void button13_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button13", sender, e);
        }
        private void button14_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button14", sender, e);
        }


        private void button14_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button14", sender, e);
        }

        private void button14_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button14", sender, e);
        }
        private void button15_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button15", sender, e);
        }


        private void button15_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button15", sender, e);
        }

        private void button15_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button15", sender, e);
        }
        private void button16_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button16", sender, e);
        }


        private void button16_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button16", sender, e);
        }

        private void button16_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button16", sender, e);
        }

        private void button17_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button17", sender, e);
        }


        private void button17_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button17", sender, e);
        }

        private void button17_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button17", sender, e);
        }
        private void button18_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button18", sender, e);
        }


        private void button18_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button18", sender, e);
        }

        private void button18_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button18", sender, e);
        }

        private void button19_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button19", sender, e);
        }


        private void button19_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button19", sender, e);
        }

        private void button19_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button19", sender, e);
        }

        private void button20_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button20", sender, e);
        }


        private void button20_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button20", sender, e);
        }

        private void button20_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button20", sender, e);
        }
        private void button21_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button21", sender, e);
        }


        private void button21_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button21", sender, e);
        }

        private void button21_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button21", sender, e);
        }
        private void button22_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button22", sender, e);
        }


        private void button22_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button22", sender, e);
        }

        private void button22_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button22", sender, e);
        }
        private void button23_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button23", sender, e);
        }


        private void button23_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button23", sender, e);
        }

        private void button23_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button23", sender, e);
        }
        private void button24_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button24", sender, e);
        }


        private void button24_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button24", sender, e);
        }

        private void button24_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button24", sender, e);
        }
        private void button25_DragDrop(object sender, DragEventArgs e)
        {
            dragDrop("button25", sender, e);
        }


        private void button25_DragEnter(object sender, DragEventArgs e)
        {
            dragEnter("button25", sender, e);
        }

        private void button25_MouseDown(object sender, MouseEventArgs e)
        {
            mouseDown("button25", sender, e);
        }

        private void button37_Click(object sender, EventArgs e)
        {
            var result = new Randomizer().Execute();

            foreach (var item in result)
            {
                Button btn = (Button)this.Controls["button" + (26 + item.Index).ToString()];
                btn.BackColor = Randomizer.ColorMapper[item.ColorCode];

            }

            var result2 = new BoardRandomizer().Execute();

            foreach (var item in result2)
            {
                Button btn = (Button)this.Controls["button" + (1 + item.Index).ToString()];
                btn.BackColor = BoardRandomizer.ColorMapper[item.ColorCode];
                btn.ForeColor = btn.BackColor;
                if(btn.BackColor == Color.Transparent)
                {
                    btn.AllowDrop = true;
                }
            }
        }


        private void dragDrop(string buttonName, object sender, DragEventArgs e)
        {
            Button btn1 = (Button)this.Controls[buttonName];

            var a = e.Data.GetData(DataFormats.Text).ToString();
            Button btn2 = (Button)this.Controls[a];

            btn1.BackColor = btn2.BackColor;
            btn1.ForeColor = btn2.BackColor;
            btn2.BackColor = Color.Transparent;
            btn2.ForeColor = Color.Transparent;
            btn2.AllowDrop = true;
            btn1.AllowDrop = false;
            
            // check correctnes of the solution
            if(button26.BackColor == button7.BackColor &&
                button27.BackColor == button8.BackColor &&
                button28.BackColor == button9.BackColor &&
                button29.BackColor == button12.BackColor &&
                button30.BackColor == button13.BackColor &&
                button31.BackColor == button14.BackColor &&
                button32.BackColor == button17.BackColor &&
                button33.BackColor == button18.BackColor &&
                button34.BackColor == button19.BackColor
                )
            {
                MessageBox.Show("Wygrana. Brawo!");
            }
        }

        private void mouseDown(string buttonName, object sender, MouseEventArgs e)
        {
            Button btn1 = (Button)this.Controls[buttonName];

            if (btn1.BackColor == Color.Transparent)
                return;

            btn1.DoDragDrop(btn1.Text, DragDropEffects.Copy |
                DragDropEffects.Move);
        }

        private void dragEnter(string buttonName,  object sender, DragEventArgs e)
        {
            var extractedButtonNumber = int.Parse(buttonName.Substring(6, buttonName.Length - 6));

            var a = e.Data.GetData(DataFormats.Text).ToString();
            var extractedButtonNumber2 = int.Parse(a.Substring(6, a.Length - 6));

            Button btn1 = (Button)this.Controls[buttonName];

            if ((extractedButtonNumber == extractedButtonNumber2 -1 ||
                extractedButtonNumber == extractedButtonNumber2 + 1 ||
                extractedButtonNumber == extractedButtonNumber2 - 5 ||
                extractedButtonNumber == extractedButtonNumber2 + 5) 
                && btn1.BackColor == Color.Transparent
                )
            {
                if (e.Data.GetDataPresent(DataFormats.Text))
                    e.Effect = DragDropEffects.Copy;
            }
            else
            {
                e.Effect = DragDropEffects.None;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.Text = " Rubik's Race Game";
        }
    }
}
